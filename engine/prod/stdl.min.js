function PathSettings(){this.headerElement="div[name=headerFocus]",this.focusElement="div[name=newTasks]",this.focusVisibleElement="div[name=newTasks]:visible",this.activeElement="div[name=activeElement]",this.taskindex="span[name=index]",this.taskDescription="input[name=description]",this.taskStatus="select[name=taskStatus]",this.taskPriority="select[name=taskPriority]",this.newTasks="div[name=newTasks]",this.cssActiveTask="panel panel-default new-task-active",this.cssInActiveTask="panel panel-default",this.cssHighPriorityTask="panel panel-danger",this.cssLowPriorityTask="panel panel-info",this.cssMiddlePriorityTask="panel panel-warning",this.cssClassActive="new-task-active"}function isDOMElementExist(t){return $(t).length>0?!0:!1}function TreeManager(){this.eventList=[]}function TreeEvent(t){this.commands=[],this.keys=[],this.howToUse=[],this.templateName=null,this.initTemplate(t)}function HowToUse(t,e,s,n){this.context=t,this.onfocus=e,this.text=s,this.buttonName=n}function Command(t,e,s,n,i){this.permissionViaFocus=t,this.permissionsViaContext=e||[],this.link=s||null,this.linkContext=n||null,this.linkParams=i}function Tree(t,e,s,n,i,r,o){var l=new Task(t,e,s,n,i);this._root=l,this.currentParent=null,this.currentDOMElement=new TaskDOMElement(null,this),this.isFirstTask=!0,this.priority=new Priority,this.status=new Status,this.index=new Index,this.countNodes=0,this.context=r,this.isFocusOnInput=!1,this.initContext(),this.refreshDOMCounter(),this.areClosedTaskHidden=!0,this.filter=o}function TaskDOMElement(t,e){this.element=t||null,this.pointerOfDOMElementWhileChangingIndexes=null,this.isFirstTaskDOMElement=null,this.hasFocus=!1,this.tree=e}function Task(t,e,s,n,i){this.index=i,this.description=t,this.priority=e,this.status=s,this.parent=n,this.children=[]}function Status(){this.active="selected",this.closed="",this._isVisible=!0}function Priority(){this.low="",this.middle="",this.high="selected",this._isVisible=!0}function Index(){this._isVsibile=!0}function EnumFilter(){this.all="all",this.active="active",this.closed="closed",this.high="high",this.middle="middle",this.low="low"}function EnumStatus(){this.active="active",this.closed="closed"}function EnumPriority(){this.low="low",this.middle="middle",this.high="high"}function EnumContext(){this.read="read",this.write="write",this.empty="empty"}var stdl={};$(stdl).ready(function(){stdl.enumStatus=new EnumStatus,stdl.enumPriority=new EnumPriority,stdl.enumContext=new EnumContext,stdl.enumFilter=new EnumFilter,stdl.paths=new PathSettings,stdl.tree=new Tree("",stdl.enumPriority.low,stdl.enumStatus.active,void 0,void 0,stdl.enumFilter.all),stdl.treeManager=new TreeManager,stdl.createNewTaskEvent(),stdl.createDeleteEvent(),stdl.createSubTaskEvent(),stdl.createSetFocusEvent(),stdl.createClearEvent(),stdl.createUpMovementEvent(),stdl.createDownMovementEvent(),stdl.createClosedTaskEvent(),stdl.createStoreListEvent(),stdl.createRestoreListEvent(),stdl.createTabEvent(),document.onkeydown=stdl.treeManager.recognizeEvent,stdl.treeManager.setHowToUseKeysInstructions(stdl.tree.context,"false"),stdl.displayMessageIfItIsNotChrome()});var stdl={displayMessageIfItIsNotChrome:function(){var t=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,e=!!window.chrome&&!t;e?$("#infoMessageForBrowserSupport").hide():$("#infoMessageForBrowserSupport").show()},createTabEvent:function(){var t=new TreeEvent,e=[];e.push(new HowToUse([stdl.enumContext.write],"true","Press 'TAB' to select next input element")),e.push(new HowToUse([stdl.enumContext.write],"true","Press 'TAB' + 'SHIFT' to select previous input element"));var s=[9];t.registerKeys(s,e),stdl.treeManager.addEvent(t)},createRestoreListEvent:function(){var t="#UploadButtonTemplate",e=new TreeEvent(t),s=new Command(!1,[stdl.enumContext.empty,stdl.enumContext.read,stdl.enumContext.write],stdl.treeManager.showOpenFileDialog,stdl.treeManager),n=[];n.push(new HowToUse([stdl.enumContext.empty,stdl.enumContext.read,stdl.enumContext.write],"false","Press 'R' or 'r'' to restore list from the local drive.","(R)estore"));var i=new Array(82,114);e.registerKeys(i,n),e.pushCommand(s),stdl.treeManager.addEvent(e)},createStoreListEvent:function(){var t=new TreeEvent,e=new Command(!1,[stdl.enumContext.read,stdl.enumContext.write],stdl.tree.downloadAsTxtFile,stdl.tree),s=[];s.push(new HowToUse([stdl.enumContext.read,stdl.enumContext.write],"false","Press 'B' or 'b' to store list on the local drive.","(B)ackup"));var n=new Array(66,98);t.registerKeys(n,s),t.pushCommand(e),stdl.treeManager.addEvent(t)},createClosedTaskEvent:function(){var t=new TreeEvent,e=new Command(!1,[stdl.enumContext.read],stdl.tree.setVisabilityOfClosedTasks,stdl.tree),s=[];s.push(new HowToUse([stdl.enumContext.read],"false","Press 'H' or 'h' to show/hide closed task .","S(h)ow/Hide the closed tasks"));var n=[72,104];t.registerKeys(n,s),t.pushCommand(e),stdl.treeManager.addEvent(t)},createSwitchContextEvent:function(){var t=new TreeEvent,e=new Command(!1,[stdl.enumContext.write,stdl.enumContext.read],stdl.tree.switchContext,stdl.tree),s=[];s.push(new HowToUse([stdl.enumContext.write],"false","Press 'W' or 'w' to switch context to 'read'.","S(w)itch to 'read'")),s.push(new HowToUse([stdl.enumContext.read],"false","Press 'W' or 'W' to switch context to 'write'.","S(w)itch to 'write'"));var n=new Array(87,129);t.registerKeys(n,s),t.pushCommand(e),stdl.treeManager.addEvent(t)},createDownMovementEvent:function(){var t=new TreeEvent,e=new Command(!1,[stdl.enumContext.write,stdl.enumContext.read],stdl.tree.currentDOMElement.selectNextElement,stdl.tree.currentDOMElement,"down"),s=[];s.push(new HowToUse([stdl.enumContext.write,stdl.enumContext.read],"false","Press the arrow Down to move forwards.","Select the next task (arrow down)"));var n=[40];t.registerKeys(n,s),t.pushCommand(e),stdl.treeManager.addEvent(t)},createUpMovementEvent:function(){var t=new TreeEvent,e=new Command(!1,[stdl.enumContext.write,stdl.enumContext.read],stdl.tree.currentDOMElement.selectNextElement,stdl.tree.currentDOMElement,"up"),s=[];s.push(new HowToUse([stdl.enumContext.write,stdl.enumContext.read],"false","Press the arrow Up to move backwards.","Select the previous task (arrow up)"));var n=[38];t.registerKeys(n,s),t.pushCommand(e),stdl.treeManager.addEvent(t)},createClearEvent:function(){var t=new TreeEvent,e=new Command(!1,[stdl.enumContext.write,stdl.enumContext.read],stdl.tree.clear,stdl.tree,!1),s=[];s.push(new HowToUse([stdl.enumContext.write,stdl.enumContext.read],"false","Press 'C' or 'c' to clear all created tasks.","(C)lear the list"));var n=[67,99];t.registerKeys(n,s),t.pushCommand(e),stdl.treeManager.addEvent(t)},createSetFocusEvent:function(){var t=new TreeEvent,e=new Command(!1,[stdl.enumContext.write],stdl.tree.currentDOMElement.setActivInput,stdl.tree.currentDOMElement),s=new Command(!0,[stdl.enumContext.write,stdl.enumContext.empty],stdl.tree.currentDOMElement.removeFocusFromInput,stdl.tree.currentDOMElement),n=[];n.push(new HowToUse([stdl.enumContext.write],"true","Press Ctrl to lost focus from input.")),n.push(new HowToUse([stdl.enumContext.write],"false","Press Ctrl to set focus on input."," Set focus (Enter)"));var i=[13];t.registerKeys(i,n),t.pushCommand(e),t.pushCommand(s),stdl.treeManager.addEvent(t)},createNewTaskEvent:function(){var t=new TreeEvent,e=new Command(!1,[stdl.enumContext.write,stdl.enumContext.empty],stdl.tree.createNewTask,stdl.tree),s=[];s.push(new HowToUse([stdl.enumContext.write,stdl.enumContext.empty],"false","Press 'n' or 'N' to create a new task","(N)ew task"));var n=new Array(78,110);t.registerKeys(n,s),t.pushCommand(e),stdl.treeManager.addEvent(t)},createDeleteEvent:function(){var t=new TreeEvent,e=new Command(!1,[stdl.enumContext.write],stdl.tree.deleteTask,stdl.tree),s=[];s.push(new HowToUse([stdl.enumContext.write],"false","Press 'D' or 'd' to delete a task.","(D)elete current"));var n=new Array(68,100);t.registerKeys(n,s),t.pushCommand(e),stdl.treeManager.addEvent(t)},createSubTaskEvent:function(){var t=new TreeEvent,e=new Command(!1,[stdl.enumContext.write],stdl.tree.createSubTask,stdl.tree),s=[];s.push(new HowToUse([stdl.enumContext.write],"false","Press 's' or 'S' to create a sub task.","(S)ub task"));var n=new Array(83,115);t.registerKeys(n,s),t.pushCommand(e),stdl.treeManager.addEvent(t)}};Array.prototype.insert=function(t,e){this.splice(t,0,e)},Array.prototype.registerKeys=function(t){for(var e=0;e<t.length;e++)this.push(t[e])},Array.prototype.contains=function(t){for(var e=0;e<this.length;e++)if(t==this[e])return!0;return!1},TreeManager.prototype.addEvent=function(t){this.eventList.push(t)},TreeManager.prototype.recognizeEvent=function(t){t=t||window.event,stdl.treeManager.executeCommand(t.keyCode)},TreeManager.prototype.executeCommand=function(t){for(var e=this.isFocusOnSpecificTask(),s=0;s<this.eventList.length;s++)for(var n=0;n<this.eventList[s].commands.length;n++)this.eventList[s].commands[n].hasFocusPermission(e)&&this.eventList[s].contains(t)&&this.eventList[s].commands[n].hasContextPermission()&&this.eventList[s].commands[n].execute();13==t&&(e=stdl.tree.currentDOMElement.hasFocus),this.setHowToUseKeysInstructions(stdl.tree.context,e)},TreeManager.prototype.setActiveElement=function(){var t=stdl.treeManager.isFocusOnSpecificTask();if(t){var e=$(document.activeElement).closest(stdl.paths.focusElement);stdl.tree.currentDOMElement.setNewElement(e),stdl.treeManager.setHowToUseKeysInstructions(stdl.tree.context,t)}else"a"!=document.activeElement.localName&&stdl.tree.currentDOMElement.removeFocusFromInput(),stdl.treeManager.setHowToUseKeysInstructions(stdl.tree.context,t)},TreeManager.prototype.isFocusOnSpecificTask=function(){var t=document.activeElement.name;return"description"==t||"taskPriority"==t||"taskStatus"==t?!0:!1},TreeManager.prototype.setHowToUseKeysInstructions=function(t,e){$("#buttons").html("");for(var s=e.toString(),n=[],i=[],r=[],o=[],l=0;l<this.eventList.length;l++)for(var a=0;a<this.eventList[l].howToUse.length;a++)for(var d=0;d<this.eventList[l].howToUse[a].context.length;d++)this.eventList[l].howToUse[a].context[d]==t&&this.eventList[l].howToUse[a].onfocus==s&&"undefined"!=typeof this.eventList[l].howToUse[a].buttonName&&(n.push(this.eventList[l].howToUse[a].buttonName),i.push(this.eventList[l].keys[0]),r.push(this.eventList[l].templateName),o.push(this.eventList[l].howToUse[a].text));for(var l=0;l<n.length;l++){var h={buttonName:n[l],keyCode:i[l],toolTip:o[l]},u=$(r[l]).tmpl(h);$("#buttons").append(u)}$('[data-toggle="tooltip"]').tooltip()},TreeManager.prototype.setVisabilityOfTask=function(){stdl.tree.currentDOMElement.hideIfClosedFilterDoNotMatch(),stdl.tree.refreshDOMCounter()},TreeManager.prototype.writeChanges=function(){stdl.tree.currentDOMElement.writeChangesToTreeTask(stdl.tree._root)},TreeManager.prototype.showOpenFileDialog=function(){$("#upload").click()},TreeManager.prototype.filterTasks=function(t,e,s){"undefined"!=typeof e&&"undefined"!=typeof t?stdl.tree.showTasksBasedOnCharacteristic(t,e):stdl.tree.showAll(),stdl.tree.setFilter(s)},TreeManager.prototype.changePriorityColor=function(){stdl.tree.currentDOMElement.colorBasedOnPriority(),stdl.tree.currentDOMElement.hideIfPriorityFilterDoNotMatch(),stdl.tree.refreshDOMCounter()},TreeEvent.prototype.initTemplate=function(t){"undefined"!=typeof t?this.templateName=t:this.templateName="#ButtonTemplate"},TreeEvent.prototype.registerKeys=function(t,e){this.keys.registerKeys(t),this.addHowToUseObjects(e)},TreeEvent.prototype.addHowToUseObjects=function(t){for(var e=0;e<t.length;e++)this.howToUse.push(t[e])},TreeEvent.prototype.contains=function(t){for(var e=0;e<this.keys.length;e++)if(t==this.keys[e])return!0;return!1},TreeEvent.prototype.pushCommand=function(t){this.commands.push(t)},TreeEvent.prototype.getCommand=function(t){return this.commands[t]},Command.prototype.execute=function(){this.link.call(this.linkContext,this.linkParams)},Command.prototype.setPermissionViaFocus=function(t){this.permisionsViaFocus=t},Command.prototype.getFocusPermission=function(){return this.permissionViaFocus},Command.prototype.setCommand=function(t){this.link=t},Command.prototype.getCommand=function(){return this.link},Command.prototype.setPermissionsViaContext=function(t){for(var e=0;e<t.length;e++)this.permissionsViaContext.push(t[e])},Command.prototype.getPermissionsViaContext=function(){return this.permissionsViaContext},Command.prototype.hasFocusPermission=function(t){return this.getFocusPermission()==t?!0:!1},Command.prototype.hasContextPermission=function(){for(var t=0;t<this.permissionsViaContext.length;t++)if(stdl.tree.context==this.permissionsViaContext[t])return!0;return!1},Tree.prototype.setCharactersticsBasedOnFilter=function(){this.filter==stdl.enumFilter.closed&&this.status.setStatus(stdl.enumStatus.closed),this.filter==stdl.enumFilter.active&&this.status.setStatus(stdl.enumStatus.active),this.filter==stdl.enumFilter.high&&this.priority.setPriority(stdl.enumPriority.high),this.filter==stdl.enumFilter.middle&&this.priority.setPriority(stdl.enumPriority.middle),this.filter==stdl.enumFilter.low&&this.priority.setPriority(stdl.enumPriority.low)},Tree.prototype.getFilter=function(){return this.filter},Tree.prototype.setFilter=function(t){this.filter=t},Tree.prototype.setDefaultStatus=function(t){this._root.status=priority},Tree.prototype.setDefaultPriority=function(t){this._root.priority=t},Tree.prototype.setVisabilityOfClosedTasks=function(){if(this.areClosedTaskHidden)this.areClosedTaskHidden=!1,$(stdl.paths.focusElement).removeClass(stdl.paths.cssClassActive),$(stdl.paths.focusElement).show(),this.currentDOMElement.setCurrent();else{this.areClosedTaskHidden=!0;for(var t=$(stdl.paths.focusElement).find(stdl.paths.taskStatus),e=0;e<t.length;e++)$(t[e]).val()==stdl.enumStatus.closed&&$(t[e]).closest(stdl.paths.focusElement).hide();this.currentDOMElement.selectNewOneIfItIsClosed()}},Tree.prototype.hideIfClosed=function(t){var e=$(t).find(stdl.paths.taskStatus).val();return e==stdl.enumStatus.closed?($(t).hide(),!0):!1},Tree.prototype.initContext=function(){1==this._root.hasChildren(this)?this.context=stdl.enumContext.read:this.context=stdl.enumContext.empty,this.setDOMContext()},Tree.prototype.setContext=function(t){this.context=t,this.setDOMContext()},Tree.prototype.setDOMContext=function(){$("#context").html(this.context)},Tree.prototype.switchContext=function(){this.context==stdl.enumContext.write?this.setContext(stdl.enumContext.read):this.context==stdl.enumContext.read&&this.setContext(stdl.enumContext.write),0==this._root.children.length&&this.setContext(stdl.enumContext.empty)},Tree.prototype.getContext=function(){return this.context},Tree.prototype.isContext=function(t){return t==this.context?!0:!1},Tree.prototype.changeElementsBasedOnContext=function(){for(var t=$("#FutureTasks "+stdl.paths.focusElement).first();t.length>0;)this.context==stdl.enumContext.read?(this.enableInputsOnTaskDOMElement(t,!0),this.colorDOMElementBasedOnPriority(t),this.hideIfClosed(t),this.currentDOMElement.getElement()[0]==t[0]&&t.addClass(stdl.paths.cssClassActive)):this.context==stdl.enumContext.write&&(this.enableInputsOnTaskDOMElement(t,!1),t.show(),t.removeClass(),this.currentDOMElement.getElement()[0]==t[0]?t.addClass(stdl.paths.cssActiveTask):t.addClass(stdl.paths.cssInActiveTask)),t=t.next();this.currentDOMElement.selectNewOneIfItIsClosed()},Tree.prototype.colorDOMElementBasedOnPriority=function(t){var e=$(t).find(stdl.paths.taskPriority).val();$(t).removeClass(),e==stdl.enumPriority.low?$(t).addClass(stdl.paths.cssLowPriorityTask):e==stdl.enumPriority.middle?$(t).addClass(stdl.paths.cssMiddlePriorityTask):e==stdl.enumPriority.high&&$(t).addClass(stdl.paths.cssHighPriorityTask)},Tree.prototype.enableInputsOnTaskDOMElement=function(t,e){$(t).find(stdl.paths.taskDescription).prop("disabled",e),$(t).find(stdl.paths.taskPriority).prop("disabled",e)},Tree.prototype.deleteTask=function(){if(0==this._root.hasChildren(this))return void(this.context=stdl.enumContext.empty);var t=$(stdl.paths.focusVisibleElement);if(0!=t.length){var e=this.currentDOMElement.findMatchingTreeTask(this._root);if(e.isExist()){if(e.hasChildren()){var s=confirm("Deleting this task will delete its sub task too. Are you sure?");if(0==s)return}var n=e.findTaskPositionInParentChildren();e.parent.children.splice(n,1),this.currentDOMElement.removeChildren(),this.currentDOMElement.removeCurrentElementAndSelectNewOne(),this.refreshTaskIndexes()}0==this._root.hasChildren()&&(this.context=stdl.enumContext.empty)}},Tree.prototype.refreshDOMCounter=function(){$("#count_all").html(this.countNodes);for(var t=0,e=0,s=$(stdl.paths.focusElement).find(stdl.paths.taskStatus),n=0;n<s.length;n++)$(s[n]).val()==stdl.enumStatus.closed?e++:t++;$("#count_active").html(t),$("#count_closed").html(e);for(var i=0,r=0,o=0,l=$(stdl.paths.focusElement).find(stdl.paths.taskPriority),n=0;n<l.length;n++){var a=$(l[n]).val();a==stdl.enumPriority.high?i++:a==stdl.enumPriority.middle?o++:a==stdl.enumPriority.low&&r++}$("#count_high").html(i),$("#count_middle").html(o),$("#count_low").html(r)},Tree.prototype.createNewTask=function(){var t=this.currentDOMElement.findMatchingTreeTask(this._root),e=null;null==t?(t=this._root,this.currentParent=void 0,e=this._root.children.length):(this.currentParent=t.parent,e=this.currentParent.children.length===t.index?this._root.children.length:t.index-1),null==this.currentParent&&(this.currentParent=t),currentNode=new Task(this._root.description,this._root.priority,this._root.status,this.currentParent,e+1),this.currentParent.children.insert(e,currentNode),this.currentParent=currentNode.parent,this.currentDOMElement.addElement(currentNode),this.refreshTaskIndexes(),this.setContext(stdl.enumContext.write)},Tree.prototype.createSubTask=function(){if(0==this._root.hasChildren())return void(this.context=stdl.enumContext.empty);var t=this.currentDOMElement.findMatchingTreeTask(this._root);null==t&&(t=this._root),currentNode=new Task(this._root.description,this._root.priority,this._root.status,t,t.children.length+1),t.children.push(currentNode),this.currentParent=t.parent,this.currentDOMElement.addElement(currentNode),this.refreshTaskIndexes()},Tree.prototype.refreshTaskIndexes=function(t){this.countNodes=0,this.currentDOMElement.pointerOfDOMElementWhileChangingIndexes=null,this.currentDOMElement.isFirstTaskDOMElement=!0,"undefined"==typeof t&&(t=this._root),this.refreshIndexes(t),this.refreshDOMCounter()},Tree.prototype.refreshIndexes=function(t){if(void 0!=t.index){var e=this.currentDOMElement.stepThroughNextElement();t.setTaskIndexByPositionInParrentArray(),e.find(stdl.paths.taskindex).html(t.getTaskIndex()),this.countNodes++}for(var s=0;s<t.children.length;s++)this.refreshIndexes(t.children[s])},Tree.prototype.convertToText=function(){var t=[],e=JSON.stringify(this._root,function(e,s){if(null!=s&&"object"==typeof s){if(t.indexOf(s)>=0)return;t.push(s)}return s});return e},Tree.prototype.downloadAsTxtFile=function(){var t=document.createElement("a");if(t.setAttribute("target","_blank"),void 0!==Blob){var e=new Blob([this.convertToText()],{type:"text/plain"});t.setAttribute("href",URL.createObjectURL(e))}else t.setAttribute("href","data:text/plain,"+encodeURIComponent(text));var s=new Date,n=s.getDate(),i=s.getMonth()+1,r=n+"-"+i+"-"+s.getFullYear();t.setAttribute("download","stdl_"+r),document.body.appendChild(t),t.click()},Tree.prototype.restoreFromTextFile=function(t){var e=t.target,s=new FileReader;s.onload=function(){stdl.tree.clear();var t=JSON.parse(s.result),e=new Task("",stdl.enumPriority.low,stdl.enumStatus.active,void 0,void 0);stdl.tree.restoreFromJsonObject(t,e,e),stdl.tree._root=e,stdl.tree.createDOMTree(e),stdl.tree.context=stdl.enumContext.write,stdl.tree.countNodes--,stdl.tree.setFilter(stdl.enumFilter.all),stdl.tree.refreshDOMCounter(),stdl.treeManager.setHowToUseKeysInstructions(stdl.tree.context,"false")},s.readAsText(e.files[0])},Tree.prototype.restoreFromJsonObject=function(t,e,s){if("undefined"!=typeof t){this.countNodes++;for(var n=0;n<t.children.length;n++){var i=new Task(t.children[n].description,t.children[n].priority,t.children[n].status,s,t.children[n].index);e.children.push(i),this.restoreFromJsonObject(t.children[n],i,i)}}},Tree.prototype.clear=function(t){if(0==this._root.hasChildren(this))return void(this.context=stdl.enumContext.empty);if(0==t){var e=confirm("You are about to clear all content. Are you sure?");if(0==e)return}$("#FutureTasks").empty(),this.currentDOMElement.setElement(null),this.currentParent=void 0,this.setContext(stdl.enumContext.empty),this._root.children=[],this.countNodes=0,this.refreshDOMCounter()},Tree.prototype.createDOMTree=function(t){for(var e=0;e<t.children.length;e++)this.currentDOMElement.addElement(t.children[e]),this.createDOMTree(t.children[e])},Tree.prototype.showAll=function(){var t=$(stdl.paths.focusElement);t.show(),this.refreshDOMCounter()},Tree.prototype.showTasksBasedOnCharacteristic=function(t,e){$(stdl.paths.focusElement).hide();for(var s=$(stdl.paths.focusElement).find(t),n=0,i=0;i<s.length;i++)if($(s[i]).val()==e){n++;var r=$(s[i]).closest(stdl.paths.focusElement);1==n&&this.currentDOMElement.setNewElement(r),$(r).show()}if(0==n){var s=$(stdl.paths.focusElement);s.length>0&&this.currentDOMElement.setNewElement(s.last())}this.refreshDOMCounter()},TaskDOMElement.prototype.setActivInput=function(){this.hasFocus=!0;var t=$(this.element).find(stdl.paths.taskDescription);setTimeout(function(){t.focus()},200)},TaskDOMElement.prototype.removeFocusFromInput=function(){if(this.hasFocus=!1,null!=this.element){var t=document.activeElement.localName+"[name="+document.activeElement.name+"]";$(this.element).find(t).blur()}},TaskDOMElement.prototype.setCurrent=function(){null!=this.element&&$(this.element).addClass(stdl.paths.cssClassActive)},TaskDOMElement.prototype.setNewElement=function(t){this.unsetAll(),this.setElement(t),this.setCurrent()},TaskDOMElement.prototype.unsetAll=function(){$(stdl.paths.focusElement).removeClass(stdl.paths.cssClassActive)},TaskDOMElement.prototype.getElement=function(){return this.element},TaskDOMElement.prototype.searchPrevActiveElement=function(t){if("up"==t)for(var e=this.getPrevNeighbourElement();isDOMElementExist(e);){var s=$(e).is(":visible");if(s)return this.setElement(e),!0;e=$(e).prev()}return!1},TaskDOMElement.prototype.searchNextActiveElement=function(t){if("down"==t)for(var e=this.getNextNeighbourElement();isDOMElementExist(e);){var s=$(e).is(":visible");if(s)return this.setElement(e),!0;e=$(e).next()}return!1},TaskDOMElement.prototype.selectNextElement=function(t){this.unsetAll();"up"==t&&this.searchPrevActiveElement(t),"down"==t&&this.searchNextActiveElement(t),this.setCurrent()},TaskDOMElement.prototype.getIndex=function(){var t=$(this.element).find(stdl.paths.taskindex),e=t.text().split(".");return e},TaskDOMElement.prototype.removeChildren=function(){for(var t=this.getIndex(),e=new TaskDOMElement($(this.element).next());e.isExist()&&e.getIndex().length>t.length;)deletePointer=e.element,e.setElement(e.getNextNeighbourElement()),deletePointer.remove()},TaskDOMElement.prototype.selectNewOne=function(){var t=!1;t=this.searchPrevActiveElement("up"),0==t&&(t=this.searchNextActiveElement("down")),t&&this.setCurrent()},TaskDOMElement.prototype.removeCurrentElementAndSelectNewOne=function(){var t=this.getNextNeighbourElement();isDOMElementExist(t)?(this.removeElement(),this.setElement(t),this.setCurrent()):(prevElement=this.getPrevNeighbourElement(),isDOMElementExist(prevElement)?(this.removeElement(),this.setElement(prevElement),this.setCurrent()):(this.removeElement(),this.setElement(null)))},TaskDOMElement.prototype.stepThroughNextElement=function(){return this.isFirstTaskDOMElement?(this.pointerOfDOMElementWhileChangingIndexes=$(stdl.paths.newTasks).first(),this.isFirstTaskDOMElement=!1):this.pointerOfDOMElementWhileChangingIndexes=this.pointerOfDOMElementWhileChangingIndexes.next(),this.pointerOfDOMElementWhileChangingIndexes},TaskDOMElement.prototype.findMatchingTreeTask=function(t){var e=null;if(this.isExist())for(var s=this.getIndex(),e=t,n=0;n!=s.length;)e=e.children[s[n]-1],n++;return e},TaskDOMElement.prototype.isExist=function(){return null==this.element||0==this.element.length?!1:!0},TaskDOMElement.prototype.addElement=function(t){this.tree.status.setStatus(t.status),this.tree.priority.setPriority(t.priority),this.tree.setCharactersticsBasedOnFilter();var e=[{indexVisability:this.tree.index.getVisability(),index:t.getTaskIndex(),defaultText:t.description,highPrioritySelected:this.tree.priority.high,middlePrioritySelected:this.tree.priority.middle,lowPrioritySelected:this.tree.priority.low,priorityVisability:this.tree.priority.getVisability(),activeSelected:this.tree.status.active,closedSelected:this.tree.status.closed,statusVisability:this.tree.status.getVisability()}];this.isExist()?($(this.element).after($("#TaskTemplate").tmpl(e)),this.selectNextElement("down")):this.setElement($("#TaskTemplate").tmpl(e).appendTo("#FutureTasks")),this.colorBasedOnPriority()},TaskDOMElement.prototype.setElement=function(t){this.element=t||null},TaskDOMElement.prototype.getNextNeighbourElement=function(){return this.isExist()?$(this.element).next():void 0},TaskDOMElement.prototype.getPrevNeighbourElement=function(){return this.isExist()?$(this.element).prev():void 0},TaskDOMElement.prototype.removeElement=function(){this.isExist&&$(this.element).remove()},TaskDOMElement.prototype.writeChangesToTreeTask=function(t){var e=$(this.element).find(stdl.paths.taskDescription),s=$(this.element).find(stdl.paths.taskStatus),n=$(this.element).find(stdl.paths.taskPriority),i=this.findMatchingTreeTask(t);i.description=e.val(),i.priority=n.val(),i.status=s.val()},TaskDOMElement.prototype.selectNewOneIfItIsClosed=function(){this.tree.context==stdl.enumContext.read&&$(this.element).find(stdl.paths.taskStatus).val()==stdl.enumStatus.closed&&this.selectNewOne()},TaskDOMElement.prototype.colorBasedOnPriority=function(){var t=$(this.element).find(stdl.paths.taskPriority).val();$(this.element).removeClass(),t==stdl.enumPriority.low?$(this.element).addClass(stdl.paths.cssLowPriorityTask):t==stdl.enumPriority.middle?$(this.element).addClass(stdl.paths.cssMiddlePriorityTask):t==stdl.enumPriority.high&&$(this.element).addClass(stdl.paths.cssHighPriorityTask),this.setCurrent()},TaskDOMElement.prototype.hideIfPriorityFilterDoNotMatch=function(){var t=$(this.element).find(stdl.paths.taskPriority).val();stdl.enumFilter.high==this.tree.filter?t!=stdl.enumPriority.high&&($(this.element).hide(),this.selectNewOne()):stdl.enumFilter.middle==this.tree.filter?t!=stdl.enumPriority.middle&&($(this.element).hide(),this.selectNewOne()):stdl.enumFilter.low==this.tree.filter&&t!=stdl.enumPriority.low&&($(this.element).hide(),this.selectNewOne())},TaskDOMElement.prototype.hideIfClosedFilterDoNotMatch=function(){var t=$(this.element).find(stdl.paths.taskStatus).val();stdl.enumFilter.closed==this.tree.filter?t!=stdl.enumStatus.closed&&($(this.element).hide(),this.selectNewOne()):stdl.enumFilter.active==this.tree.filter&&t!=stdl.enumStatus.active&&($(this.element).hide(),this.selectNewOne())},Task.prototype.getTaskIndex=function(){for(var t=this,e="";"undefined"!=typeof t&&"undefined"!=typeof t.index;)e+=t.index+".",t=t.parent;var s=e.split(".").reverse().join(".");return s.substring(1)},Task.prototype.findTaskPositionInParentChildren=function(){for(var t=null,e=0;e<this.parent.children.length;e++)if(this==this.parent.children[e]){t=e;break}return t},Task.prototype.setTaskIndexByPositionInParrentArray=function(){var t=this.findTaskPositionInParentChildren();null!=t&&(t++,this.index=t)},Task.prototype.hasChildren=function(t){return this.children.length>0?!0:!1},Task.prototype.isExist=function(){return null==this?!1:!0},Status.prototype.isVisible=function(){return this._isVisible},Status.prototype.setVisability=function(t){this._isVisible=t},Status.prototype.getVisability=function(){return this.isVisible()?"":"display:none"},Status.prototype.setStatus=function(t){t==stdl.enumStatus.active?(this.active="selected",this.closed=""):t==stdl.enumStatus.closed&&(this.active="",this.closed="selected")},Priority.prototype.setPriority=function(t){t==stdl.enumPriority.middle?(this.middle="selected",this.high="",this.low=""):t==stdl.enumPriority.high?(this.high="selected",this.low="",this.middle=""):t==stdl.enumPriority.low&&(this.low="selected",this.high="",this.middle="")},Priority.prototype.isVisible=function(){return this._isVisible},Priority.prototype.setVisability=function(t){this._isVisible=t},Priority.prototype.getVisability=function(){return this.isVisible()?"":"display:none"},Index.prototype.isVisible=function(){return this._isVsibile},Index.prototype.setVisability=function(t){this.isVisible=t},Index.prototype.getVisability=function(){return this.isVisible?"":"display:none"};